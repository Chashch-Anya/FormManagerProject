{"ast":null,"code":"var _jsxFileName = \"D:\\\\STUDY STUFF\\\\\\u0413\\u0440\\u0443\\u043F\\u043F\\u043E\\u0432\\u043E\\u0439 \\u043F\\u0440\\u043E\\u0435\\u043A\\u0442\\\\Client\\\\src\\\\pages\\\\SignUp\\\\SignUp.js\";\nimport React, { useState, useContext } from \"react\";\nimport { Container, Title, Buttons, Card, ErrorMessage } from \"../SignIn/styles\";\nimport Input from \"../../components/Input\";\nimport Button from \"../../components/Button\";\nimport SizedBox from \"../../components/SizedBox\";\nimport VectorContainer from \"../../components/VectorContainer\";\nimport signin_vector from \"../../assets/img/flame-sign-up.png\";\nimport BackLink from \"../../components/BackLink\";\nimport axiosInstance from \"../../services/api\";\nimport AuthContext from \"../../contexts/auth\";\nimport { URL_ROOT, URL_LOGIN } from \"../../utils/constants\";\nexport default function SignUp(_ref) {\n  let {\n    history\n  } = _ref;\n  const {\n    user,\n    setUser\n  } = useContext(AuthContext);\n  const [email, setEmail] = useState();\n  const [password, setPassword] = useState();\n  const [username, setUsername] = useState();\n  const [name, setName] = useState();\n  const [error, setError] = useState();\n  const register = async () => {\n    if (!email || !password || !username || !name) {\n      setError(\"Please, fill all data.\");\n      return;\n    }\n    try {\n      const response = await axiosInstance.post(\"/users\", {\n        email,\n        password,\n        username,\n        name\n      });\n      axiosInstance.defaults.headers.common = {\n        Authorization: `Bearer ${response.data.token}`\n      };\n      const userData = {\n        ...user,\n        isLoggedIn: true,\n        data: response.data.user,\n        token: response.data.token\n      };\n      setUser(userData);\n      localStorage.setItem(\"user\", JSON.stringify(userData));\n      history.push(URL_ROOT);\n    } catch ({\n      response\n    }) {\n      var _response$data;\n      setError((response === null || response === void 0 ? void 0 : (_response$data = response.data) === null || _response$data === void 0 ? void 0 : _response$data.message) || (response === null || response === void 0 ? void 0 : response.data) || \"Unexpected error\");\n    }\n  };\n  const handleKeyPress = event => {\n    if (event.key === \"Enter\") {\n      register();\n    }\n  };\n  return /*#__PURE__*/React.createElement(Container, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(VectorContainer, {\n    src: signin_vector,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(Title, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 7\n    }\n  }, \"Sign Up\"), /*#__PURE__*/React.createElement(Card, {\n    width: \"50%\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(BackLink, {\n    onClick: () => history.push(URL_LOGIN),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 9\n    }\n  }, \"Back to Login\"), /*#__PURE__*/React.createElement(\"form\", {\n    className: \"col s12\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Input, {\n    id: \"email\",\n    name: \"email\",\n    icon: \"mail_outline\",\n    type: \"email\",\n    label: \"Email\",\n    value: email,\n    onChange: e => setEmail(e.target.value),\n    onKeyPress: handleKeyPress,\n    required: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(Input, {\n    id: \"password\",\n    name: \"password\",\n    icon: \"lock_outline\",\n    type: \"password\",\n    label: \"Password\",\n    value: password,\n    onChange: e => setPassword(e.target.value),\n    onKeyPress: handleKeyPress,\n    required: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(Input, {\n    id: \"username\",\n    name: \"username\",\n    icon: \"person_outline\",\n    type: \"text\",\n    label: \"Username\",\n    value: username,\n    onChange: e => setUsername(e.target.value),\n    onKeyPress: handleKeyPress,\n    required: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(Input, {\n    id: \"fullname\",\n    name: \"fullname\",\n    icon: \"face\",\n    type: \"text\",\n    label: \"Full Name\",\n    value: name,\n    onChange: e => setName(e.target.value),\n    onKeyPress: handleKeyPress,\n    required: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 11\n    }\n  })), /*#__PURE__*/React.createElement(ErrorMessage, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 9\n    }\n  }, error), /*#__PURE__*/React.createElement(SizedBox, {\n    height: \"20px\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(Buttons, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    color: \"purple\",\n    onClick: register,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 11\n    }\n  }, \"Create Account\"))));\n}","map":{"version":3,"names":["React","useState","useContext","Container","Title","Buttons","Card","ErrorMessage","Input","Button","SizedBox","VectorContainer","signin_vector","BackLink","axiosInstance","AuthContext","URL_ROOT","URL_LOGIN","SignUp","_ref","history","user","setUser","email","setEmail","password","setPassword","username","setUsername","name","setName","error","setError","register","response","post","defaults","headers","common","Authorization","data","token","userData","isLoggedIn","localStorage","setItem","JSON","stringify","push","_response$data","message","handleKeyPress","event","key","createElement","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","src","width","onClick","className","id","icon","type","label","value","onChange","e","target","onKeyPress","required","height","color"],"sources":["D:/STUDY STUFF/Групповой проект/Client/src/pages/SignUp/SignUp.js"],"sourcesContent":["import React, { useState, useContext } from \"react\";\n\nimport {\n  Container,\n  Title,\n  Buttons,\n  Card,\n  ErrorMessage\n} from \"../SignIn/styles\";\nimport Input from \"../../components/Input\";\nimport Button from \"../../components/Button\";\nimport SizedBox from \"../../components/SizedBox\";\nimport VectorContainer from \"../../components/VectorContainer\";\nimport signin_vector from \"../../assets/img/flame-sign-up.png\";\nimport BackLink from \"../../components/BackLink\";\nimport axiosInstance from \"../../services/api\";\nimport AuthContext from \"../../contexts/auth\";\nimport { URL_ROOT, URL_LOGIN } from \"../../utils/constants\";\n\nexport default function SignUp({ history }) {\n  const { user, setUser } = useContext(AuthContext);\n  const [email, setEmail] = useState();\n  const [password, setPassword] = useState();\n  const [username, setUsername] = useState();\n  const [name, setName] = useState();\n  const [error, setError] = useState();\n\n  const register = async () => {\n    if (!email || !password || !username || !name) {\n      setError(\"Please, fill all data.\");\n      return;\n    }\n    try {\n      const response = await axiosInstance.post(\"/users\", {\n        email,\n        password,\n        username,\n        name\n      });\n\n      axiosInstance.defaults.headers.common = {\n        Authorization: `Bearer ${response.data.token}`\n      };\n\n      const userData = {\n        ...user,\n        isLoggedIn: true,\n        data: response.data.user,\n        token: response.data.token\n      };\n\n      setUser(userData);\n\n      localStorage.setItem(\"user\", JSON.stringify(userData));\n\n      history.push(URL_ROOT);\n    } catch ({ response }) {\n      setError(response?.data?.message || response?.data || \"Unexpected error\");\n    }\n  };\n\n  const handleKeyPress = event => {\n    if (event.key === \"Enter\") {\n      register();\n    }\n  };\n\n  return (\n    <Container>\n      <VectorContainer src={signin_vector} />\n      <Title>Sign Up</Title>\n      <Card width=\"50%\">\n        <BackLink onClick={() => history.push(URL_LOGIN)}>\n          Back to Login\n        </BackLink>\n        <form className=\"col s12\">\n          <Input\n            id=\"email\"\n            name=\"email\"\n            icon=\"mail_outline\"\n            type=\"email\"\n            label=\"Email\"\n            value={email}\n            onChange={e => setEmail(e.target.value)}\n            onKeyPress={handleKeyPress}\n            required\n          ></Input>\n          <Input\n            id=\"password\"\n            name=\"password\"\n            icon=\"lock_outline\"\n            type=\"password\"\n            label=\"Password\"\n            value={password}\n            onChange={e => setPassword(e.target.value)}\n            onKeyPress={handleKeyPress}\n            required\n          ></Input>\n          <Input\n            id=\"username\"\n            name=\"username\"\n            icon=\"person_outline\"\n            type=\"text\"\n            label=\"Username\"\n            value={username}\n            onChange={e => setUsername(e.target.value)}\n            onKeyPress={handleKeyPress}\n            required\n          ></Input>\n          <Input\n            id=\"fullname\"\n            name=\"fullname\"\n            icon=\"face\"\n            type=\"text\"\n            label=\"Full Name\"\n            value={name}\n            onChange={e => setName(e.target.value)}\n            onKeyPress={handleKeyPress}\n            required\n          ></Input>\n        </form>\n        <ErrorMessage>{error}</ErrorMessage>\n        <SizedBox height=\"20px\" />\n        <Buttons>\n          <Button color=\"purple\" onClick={register}>\n            Create Account\n          </Button>\n        </Buttons>\n      </Card>\n    </Container>\n  );\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}