{"ast":null,"code":"var _jsxFileName = \"D:\\\\STUDY STUFF\\\\\\u0413\\u0440\\u0443\\u043F\\u043F\\u043E\\u0432\\u043E\\u0439 \\u043F\\u0440\\u043E\\u0435\\u043A\\u0442\\\\Client\\\\src\\\\pages\\\\SignIn\\\\SignIn.js\";\nimport React, { useContext, useState } from \"react\";\nimport { Container, Title, Buttons, Card, ErrorMessage } from \"./styles\";\nimport Input from \"../../components/Input\";\nimport Button from \"../../components/Button\";\nimport SizedBox from \"../../components/SizedBox\";\nimport VectorContainer from \"../../components/VectorContainer\";\nimport signin_vector from \"../../assets/img/flame-sign-up.png\";\nimport AuthContext from \"../../contexts/auth\";\nimport axiosInstance from \"../../services/api\";\nimport { URL_ROOT, URL_REGISTER } from \"../../utils/constants\";\nexport default function SignIn(_ref) {\n  let {\n    history\n  } = _ref;\n  const {\n    setUser,\n    user\n  } = useContext(AuthContext);\n  const [email, setEmail] = useState();\n  const [password, setPassword] = useState();\n  const [error, setError] = useState();\n  const login = async (email, password) => {\n    try {\n      const response = await axiosInstance.post(\"/users/auth\", {\n        email,\n        password\n      });\n      axiosInstance.defaults.headers.common = {\n        Authorization: `Bearer ${response.data.token}`\n      };\n      const userData = {\n        ...user,\n        isLoggedIn: true,\n        data: response.data.user,\n        token: response.data.token\n      };\n      setUser(userData);\n      localStorage.setItem(\"user\", JSON.stringify(userData));\n      history.push(URL_ROOT);\n    } catch ({\n      response\n    }) {\n      var _response$data;\n      setError((response === null || response === void 0 ? void 0 : (_response$data = response.data) === null || _response$data === void 0 ? void 0 : _response$data.message) || \"Unexpected error\");\n    }\n  };\n  const handleKeyPress = event => {\n    if (event.key === \"Enter\") {\n      login(email, password);\n    }\n  };\n  return /*#__PURE__*/React.createElement(Container, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(VectorContainer, {\n    src: signin_vector,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(Title, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 7\n    }\n  }, \"Sign In\"), /*#__PURE__*/React.createElement(Card, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"form\", {\n    className: \"col s12\",\n    onSubmit: () => login(email, password),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Input, {\n    id: \"email\",\n    name: \"email\",\n    icon: \"mail_outline\",\n    type: \"email\",\n    label: \"Email\",\n    value: email,\n    onChange: e => setError() || setEmail(e.target.value),\n    onKeyPress: handleKeyPress,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(Input, {\n    id: \"password\",\n    name: \"password\",\n    icon: \"lock_outline\",\n    type: \"password\",\n    label: \"Password\",\n    value: password,\n    onChange: e => setError() || setPassword(e.target.value),\n    onKeyPress: handleKeyPress,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 11\n    }\n  })), /*#__PURE__*/React.createElement(ErrorMessage, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 9\n    }\n  }, error), /*#__PURE__*/React.createElement(SizedBox, {\n    height: \"20px\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(Buttons, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    onClick: () => login(email, password),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 11\n    }\n  }, \"Sign In\"), /*#__PURE__*/React.createElement(SizedBox, {\n    height: \"20px\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(Button, {\n    onClick: () => history.push(URL_REGISTER),\n    color: \"purple\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 11\n    }\n  }, \"Create Account\"))));\n}","map":{"version":3,"names":["React","useContext","useState","Container","Title","Buttons","Card","ErrorMessage","Input","Button","SizedBox","VectorContainer","signin_vector","AuthContext","axiosInstance","URL_ROOT","URL_REGISTER","SignIn","_ref","history","setUser","user","email","setEmail","password","setPassword","error","setError","login","response","post","defaults","headers","common","Authorization","data","token","userData","isLoggedIn","localStorage","setItem","JSON","stringify","push","_response$data","message","handleKeyPress","event","key","createElement","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","src","className","onSubmit","id","name","icon","type","label","value","onChange","e","target","onKeyPress","height","onClick","color"],"sources":["D:/STUDY STUFF/Групповой проект/Client/src/pages/SignIn/SignIn.js"],"sourcesContent":["import React, { useContext, useState } from \"react\";\nimport { Container, Title, Buttons, Card, ErrorMessage } from \"./styles\";\nimport Input from \"../../components/Input\";\nimport Button from \"../../components/Button\";\nimport SizedBox from \"../../components/SizedBox\";\nimport VectorContainer from \"../../components/VectorContainer\";\nimport signin_vector from \"../../assets/img/flame-sign-up.png\";\nimport AuthContext from \"../../contexts/auth\";\nimport axiosInstance from \"../../services/api\";\nimport { URL_ROOT, URL_REGISTER } from \"../../utils/constants\";\n\nexport default function SignIn({ history }) {\n  const { setUser, user } = useContext(AuthContext);\n  const [email, setEmail] = useState();\n  const [password, setPassword] = useState();\n  const [error, setError] = useState();\n\n  const login = async (email, password) => {\n    try {\n      const response = await axiosInstance.post(\"/users/auth\", {\n        email,\n        password\n      });\n\n      axiosInstance.defaults.headers.common = {\n        Authorization: `Bearer ${response.data.token}`\n      };\n\n      const userData = {\n        ...user,\n        isLoggedIn: true,\n        data: response.data.user,\n        token: response.data.token\n      };\n\n      setUser(userData);\n\n      localStorage.setItem(\"user\", JSON.stringify(userData));\n\n      history.push(URL_ROOT);\n    } catch ({ response }) {\n      setError(response?.data?.message || \"Unexpected error\");\n    }\n  };\n\n  const handleKeyPress = event => {\n    if (event.key === \"Enter\") {\n      login(email, password);\n    }\n  };\n\n  return (\n    <Container>\n      <VectorContainer src={signin_vector}></VectorContainer>\n      <Title>Sign In</Title>\n      <Card>\n        <form className=\"col s12\" onSubmit={() => login(email, password)}>\n          <Input\n            id=\"email\"\n            name=\"email\"\n            icon=\"mail_outline\"\n            type=\"email\"\n            label=\"Email\"\n            value={email}\n            onChange={e => setError() || setEmail(e.target.value)}\n            onKeyPress={handleKeyPress}\n          ></Input>\n          <Input\n            id=\"password\"\n            name=\"password\"\n            icon=\"lock_outline\"\n            type=\"password\"\n            label=\"Password\"\n            value={password}\n            onChange={e => setError() || setPassword(e.target.value)}\n            onKeyPress={handleKeyPress}\n          ></Input>\n        </form>\n        <ErrorMessage>{error}</ErrorMessage>\n        <SizedBox height=\"20px\" />\n        <Buttons>\n          <Button onClick={() => login(email, password)}>Sign In</Button>\n          <SizedBox height=\"20px\" />\n          <Button onClick={() => history.push(URL_REGISTER)} color=\"purple\">\n            Create Account\n          </Button>\n        </Buttons>\n      </Card>\n    </Container>\n  );\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}