{"ast":null,"code":"var _jsxFileName = \"D:\\\\STUDY STUFF\\\\\\u0413\\u0440\\u0443\\u043F\\u043F\\u043E\\u0432\\u043E\\u0439 \\u043F\\u0440\\u043E\\u0435\\u043A\\u0442\\\\Client\\\\src\\\\components\\\\SurveyCard\\\\index.js\";\nimport React, { useContext } from \"react\";\nimport { SurveyContainer, Title, TitleContainer, Category, Heading, Body, Description, Footer } from \"./styles\";\nimport Button from \"../Button\";\nimport { withRouter } from \"react-router-dom\";\nimport AuthContext from \"../../contexts/auth\";\nimport axiosInstace from \"../../services/api\";\nimport SizedBox from \"../../components/SizedBox\";\nimport { COORDINATOR, IDLE, ACTIVE, URL_SURVEY, CLOSED, URL_SURVEYS, URL_RESULTS } from \"../../utils/constants\";\nimport { toast } from \"react-toastify\";\nconst SurveyCard = _ref => {\n  var _user$data, _user$data$role;\n  let {\n    history,\n    title = \"IT Executive Compensation Study\",\n    numQuestions,\n    status,\n    refetchData = () => {},\n    surveyId = \"123\"\n  } = _ref;\n  const {\n    user\n  } = useContext(AuthContext);\n  const isIdle = (status === null || status === void 0 ? void 0 : status.toUpperCase()) === IDLE;\n  const isActive = (status === null || status === void 0 ? void 0 : status.toUpperCase()) === ACTIVE;\n  const isAdmin = (user === null || user === void 0 ? void 0 : (_user$data = user.data) === null || _user$data === void 0 ? void 0 : (_user$data$role = _user$data.role) === null || _user$data$role === void 0 ? void 0 : _user$data$role.toUpperCase()) === COORDINATOR;\n  const changeSurveyStatus = status => {\n    return axiosInstace.put(`${URL_SURVEYS}/status/` + surveyId, {\n      status\n    }).then(refetchData);\n  };\n  const handleChangeStatusToActive = () => {\n    changeSurveyStatus(ACTIVE).then(() => toast.success(\"Survey moved to active.\")).catch(() => toast.error(\"Error moving survey to active.\"));\n  };\n  const handleChangeStatusToClosed = () => {\n    changeSurveyStatus(CLOSED).then(() => toast.success(\"Survey moved to closed.\")).catch(() => toast.error(\"Error moving survey to closed.\"));\n  };\n  return /*#__PURE__*/React.createElement(SurveyContainer, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Heading, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(TitleContainer, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Category, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"i\", {\n    className: \"material-icons left\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 13\n    }\n  }, \"event_note\"), \"Survey\"), /*#__PURE__*/React.createElement(Title, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 11\n    }\n  }, title))), /*#__PURE__*/React.createElement(Body, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Description, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 9\n    }\n  }, numQuestions, \" question\", numQuestions !== 1 ? \"s\" : \"\", \" (\", 0.25 * numQuestions, \" minute\", numQuestions !== 4 ? \"s\" : \"\", \")\")), /*#__PURE__*/React.createElement(Footer, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 7\n    }\n  }, isIdle ? /*#__PURE__*/React.createElement(Button, {\n    color: \"primary\",\n    rounded: true,\n    onClick: handleChangeStatusToActive,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 11\n    }\n  }, \"Open Survey\") : /*#__PURE__*/React.createElement(Button, {\n    color: isActive ? \"purple\" : \"green\",\n    rounded: true,\n    onClick: () => isActive ? history.push(`${URL_SURVEY}/${surveyId}`) : history.push(`${URL_RESULTS}/${surveyId}`),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 11\n    }\n  }, isActive ? \"Take Survey\" : \"See Results\"), isAdmin && isActive && /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(SizedBox, {\n    height: \"15px\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(Button, {\n    color: \"red\",\n    rounded: true,\n    onClick: handleChangeStatusToClosed,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 13\n    }\n  }, \"Close Survey\"))));\n};\nexport default withRouter(SurveyCard);","map":{"version":3,"names":["React","useContext","SurveyContainer","Title","TitleContainer","Category","Heading","Body","Description","Footer","Button","withRouter","AuthContext","axiosInstace","SizedBox","COORDINATOR","IDLE","ACTIVE","URL_SURVEY","CLOSED","URL_SURVEYS","URL_RESULTS","toast","SurveyCard","_ref","_user$data","_user$data$role","history","title","numQuestions","status","refetchData","surveyId","user","isIdle","toUpperCase","isActive","isAdmin","data","role","changeSurveyStatus","put","then","handleChangeStatusToActive","success","catch","error","handleChangeStatusToClosed","createElement","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","className","color","rounded","onClick","push","Fragment","height"],"sources":["D:/STUDY STUFF/Групповой проект/Client/src/components/SurveyCard/index.js"],"sourcesContent":["import React, { useContext } from \"react\";\n\nimport {\n  SurveyContainer,\n  Title,\n  TitleContainer,\n  Category,\n  Heading,\n  Body,\n  Description,\n  Footer\n} from \"./styles\";\nimport Button from \"../Button\";\nimport { withRouter } from \"react-router-dom\";\nimport AuthContext from \"../../contexts/auth\";\nimport axiosInstace from \"../../services/api\";\nimport SizedBox from \"../../components/SizedBox\";\nimport {\n  COORDINATOR,\n  IDLE,\n  ACTIVE,\n  URL_SURVEY,\n  CLOSED,\n  URL_SURVEYS,\n  URL_RESULTS\n} from \"../../utils/constants\";\nimport { toast } from \"react-toastify\";\n\nconst SurveyCard = ({\n  history,\n  title = \"IT Executive Compensation Study\",\n  numQuestions,\n  status,\n  refetchData = () => {},\n  surveyId = \"123\"\n}) => {\n  const { user } = useContext(AuthContext);\n  const isIdle = status?.toUpperCase() === IDLE;\n  const isActive = status?.toUpperCase() === ACTIVE;\n  const isAdmin = user?.data?.role?.toUpperCase() === COORDINATOR;\n  const changeSurveyStatus = status => {\n    return axiosInstace\n      .put(`${URL_SURVEYS}/status/` + surveyId, { status })\n      .then(refetchData);\n  };\n\n  const handleChangeStatusToActive = () => {\n    changeSurveyStatus(ACTIVE)\n      .then(() => toast.success(\"Survey moved to active.\"))\n      .catch(() => toast.error(\"Error moving survey to active.\"));\n  };\n  const handleChangeStatusToClosed = () => {\n    changeSurveyStatus(CLOSED)\n      .then(() => toast.success(\"Survey moved to closed.\"))\n      .catch(() => toast.error(\"Error moving survey to closed.\"));\n  };\n\n  return (\n    <SurveyContainer>\n      <Heading>\n        <TitleContainer>\n          <Category>\n            <i className=\"material-icons left\">event_note</i>Survey\n          </Category>\n          <Title>{title}</Title>\n        </TitleContainer>\n      </Heading>\n      <Body>\n        <Description>\n          {numQuestions} question{numQuestions !== 1 ? \"s\" : \"\"} ({0.25 * numQuestions} minute{numQuestions !== 4 ? \"s\" : \"\"})\n        </Description>\n      </Body>\n      <Footer>\n        {isIdle ? (\n          <Button\n            color={\"primary\"}\n            rounded\n            onClick={handleChangeStatusToActive}\n          >\n            {\"Open Survey\"}\n          </Button>\n        ) : (\n          <Button\n            color={isActive ? \"purple\" : \"green\"}\n            rounded\n            onClick={() =>\n              isActive\n                ? history.push(`${URL_SURVEY}/${surveyId}`)\n                : history.push(`${URL_RESULTS}/${surveyId}`)\n            }\n          >\n            {isActive ? \"Take Survey\" : \"See Results\"}\n          </Button>\n        )}\n        {isAdmin && isActive && (\n          <>\n            <SizedBox height=\"15px\" />\n            <Button color={\"red\"} rounded onClick={handleChangeStatusToClosed}>\n              {\"Close Survey\"}\n            </Button>\n          </>\n        )}\n      </Footer>\n    </SurveyContainer>\n  );\n};\n\nexport default withRouter(SurveyCard);\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}